# åŸºäºMOA*çš„å¤šç›®æ ‡è·¯å¾„è§„åˆ’é—®é¢˜ä¹‹æˆ‘è§
* æœ€è¿‘åœ¨å¯¹åŸºç¡€å•ç›®æ ‡Astarç®—æ³•æœ‰æ‰€äº†è§£åï¼Œç¬”è€…è¿›ä¸€æ­¥æ¢ç´¢å’Œå­¦ä¹ äº†å¤šç›®æ ‡Astarç®—æ³•ï¼Œå³MOAstarã€‚åœ¨ç”±å•ç›®æ ‡å˜æˆå¤šç›®æ ‡çš„ç ”ç©¶è¿‡ç¨‹ä¸­ï¼Œç¬”è€…ç»å†äº†ä¸€äº›ç–‘é—®å’Œæ€è€ƒï¼Œä¹Ÿæ”¶è·äº†å¾ˆå¤šä½“ä¼šå’Œæ„Ÿæ‚Ÿï¼Œäºæ˜¯åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ç¬”è€…çš„å­¦ä¹ è¿‡ç¨‹ã€‚
* [åŸºç¡€å•ç›®æ ‡A*ç®—æ³•å­¦ä¹ é“¾æ¥](https://blog.csdn.net/u013555719/article/details/142487884)
* æ­¤ä¸ºè¯¾é¢˜ç»„2024çº§ç ”ç©¶ç”Ÿå´å±çŠåŒå­¦è¿‘æœŸå­¦ä¹ å†…å®¹æ±‡æŠ¥
- æ›´å¤šå†…å®¹è¯·å…³æ³¨è¯¾é¢˜ç»„å®˜æ–¹ä¸­æ–‡ä¸»é¡µï¼šhttps://JaywayXu.github.io/zh-cn/

## ç›®å½•
[TOC]
<br>
## 1. å•ç›®æ ‡A\*ä¸å¤šç›®æ ‡A\*çš„åŒºåˆ«
### 1.1 ç›®æ ‡ä¸Šçš„åŒºåˆ«
1ã€å•ç›®æ ‡A\*çš„ç›®æ ‡ï¼šä»èµ·ç‚¹èµ°åˆ°ç»ˆç‚¹ï¼Œå…¶ä¸­è¦æ±‚æ‰€èµ°è·ç¦»æœ€çŸ­å¹¶ä¸”è¦ç»•å¼€æ‰€æœ‰ä¸å¯è¾¾ç‚¹ã€‚
2ã€å¤šç›®æ ‡A\*çš„ç›®æ ‡ï¼šï¼ˆ1ï¼‰é¡¾åæ€ä¹‰ï¼Œå¤šç›®æ ‡å°±æ˜¯åœ¨å•ç›®æ ‡çš„åŸºç¡€ä¸Š **å¢åŠ ç›®æ ‡çº¦æŸ** ,è¦æ±‚åœ¨å¤šä¸ªç›®æ ‡ä¸ŠåŒæ—¶è¿›è¡Œä¼˜åŒ–ï¼Œè€ƒè™‘å¤šä¸ªç›®æ ‡çš„æœ€å°åŒ–ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼Œæ‹¥å µç‚¹æ•°é‡æœ€å°‘ï¼Œæ‰€ç»è¿‡äº¤å‰ç‚¹æ•°é‡æœ€å°‘ï¼Œè·¯å¾„ç›®æ ‡å€¼æœ€å°ï¼Œè·¯å¾„å¿…ç»ç‚¹æœ€å¤šã€‚ï¼ˆ2ï¼‰åœ¨å•ç›®æ ‡çš„åŸºç¡€ä¸Š **æ‰¾åˆ°Paretoè§£é›†** ï¼Œåœ¨å­¦ä¹ åŸºç¡€å•ç›®æ ‡A\*ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬æœ€ç»ˆå¾—åˆ°çš„ç›®æ ‡å€¼æœ€å°çš„è·¯å¾„åªæœ‰ä¸€æ¡ï¼Œå³ä½¿å¯èƒ½å­˜åœ¨å¤šæ¡ç›®æ ‡å€¼ç›¸åŒçš„è·¯å¾„ï¼Œä½†ç®—æ³•ä¸€æ—¦æ‰¾åˆ°ç»ˆç‚¹å°†ä¸å†è¿›è¡Œä¸‹å»ï¼Œç›´æ¥è¾“å‡ºç»“æœã€‚è€Œåœ¨MOA\*ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬ä¼šåœ¨æ‰¾åˆ°æ‰€æœ‰éæ”¯é…è·¯å¾„ï¼ˆParetoè§£é›†ï¼‰ï¼Œå³ç›®æ ‡å€¼ç­‰åŒçš„æœ€ä¼˜è·¯å¾„åè¿›è¡Œè¾“å‡ºã€‚
### 1.2 å•ç›®æ ‡ç®—æ³•çš„æ ¸å¿ƒF=G+Håœ¨å¤šç›®æ ‡ä¸­çš„ä½“ç°
1ã€é¦–å…ˆï¼Œåœ¨å¤šç›®æ ‡ç®—æ³•ä¸­Fï¼ŒGï¼ŒHï¼Œå„å€¼çš„æ„ä¹‰æ²¡æœ‰æ”¹å˜ã€‚Fä»ä¸ºæ€»ä»£ä»·ï¼ŒGä»ä¸ºä»èµ·ç‚¹åˆ°è¯¥ç‚¹å·²èµ°è¿‡è·¯å¾„çš„ä»£ä»·ï¼ŒHä»ä¸ºä»è¯¥ç‚¹åˆ°ç»ˆç‚¹å°†ä»˜å‡ºçš„ä»£ä»·ã€‚åªæ˜¯ç›®æ ‡çš„è¡¨ç°å½¢å¼ä¸å†æ˜¯å•ä¸€çš„è·ç¦»ç›®æ ‡ï¼Œè€Œæ˜¯éœ€è¦æˆ‘ä»¬ **æ ¹æ®ä¸åŒçš„ç›®æ ‡å»ºç«‹ä¸åŒçš„ç›®æ ‡å‘é‡çŸ©é˜µ** ï¼Œè€ƒè™‘å¤šä¸ªç»´åº¦çš„ç›®æ ‡å€¼ã€‚
2ã€Gå€¼åœ¨å¤šç›®æ ‡A\*ç®—æ³•ä¸­æ„ä¹‰çš„å‡çº§ï¼šGå€¼ä¸ºå·²èµ°è·¯å¾„çš„ç›®æ ‡å€¼ã€‚
3ã€Hå€¼åœ¨å¤šç›®æ ‡A\*ç®—æ³•ä¸­æ„ä¹‰çš„å‡çº§ï¼šHå€¼ç”±å¯å‘å¼å‡½æ•°ç¡®å®šã€‚
## 2. å¤šç›®æ ‡A\*ç®—æ³•ä¸­Gå€¼å’ŒHå€¼çš„å®ç°
### 2.1 Gå€¼çš„è®¡ç®—
1ã€é¦–å…ˆï¼Œè®¾ç½®ä¸€ä¸ªç‰¹æ®Šç‚¹çš„æ¦‚å¿µï¼Œç‰¹æ®Šç‚¹åŒ…å«äº†èµ·ç‚¹ï¼Œç»ˆç‚¹å’Œè·¯å¾„äº¤å‰ç‚¹ã€‚
2ã€éå†æ‰€æœ‰ç‰¹æ®Šç‚¹ï¼Œå¹¶ä¸ºæ¯ä¸€ä¸ªç‰¹æ®Šç‚¹è®¾ç½®ä¸¤ä¸ªé‚»æ¥è¡¨ï¼Œåˆ†åˆ«å­˜å‚¨è¯¥ç‰¹æ®Šç‚¹çš„å‡ºè¾¹ä¸å…¥è¾¹ã€‚
3ã€åœ¨å‡ºè¾¹é‚»æ¥è¡¨å’Œå…¥è¾¹é‚»æ¥è¡¨ä¸­éƒ½å­˜å‚¨ç€ä¸¤ä¸ªç›¸é‚»ç‰¹æ®Šç‚¹ä¹‹é—´çš„ Edge ï¼Œè€Œåœ¨ Edge ä¸­çš„ edge_cost æ•°ç»„å­˜å‚¨ç€ä»ç‰¹æ®Šç‚¹ A åˆ°ç‰¹æ®Šç‚¹ B è¿™æ¡è·¯å¾„çš„å„ç›®æ ‡åˆ†é‡ã€‚edge_pass åˆ™æ˜¯å­˜å‚¨ç€ä»ç‰¹æ®Šç‚¹ A åˆ°ç‰¹æ®Šç‚¹ B å…·ä½“ç»è¿‡çš„éç‰¹æ®Šç‚¹é›†åˆã€‚
4ã€å› æ­¤ï¼Œå·²èµ°è·¯å¾„çš„å„ç›®æ ‡åˆ†é‡ï¼Œå³Gå€¼ï¼Œå¯ä»¥é€šè¿‡ **ç´¯åŠ è·¯å¾„æ‰€ç»è¿‡çš„ç‰¹æ®Šç‚¹çš„é‚»æ¥è¡¨ä¸­å¯¹åº”çš„edge_costæ•°ç»„çš„å€¼** å¾—æ¥ã€‚
```C++
for (int prev_node = 0; prev_node < dim_n; prev_node++) {//éå†æ¯ä¸ªç‰¹æ®ŠèŠ‚ç‚¹
      auto [x, y] = coords[prev_node];//è·å–å½“å‰èŠ‚ç‚¹çš„åæ ‡
      for (const auto &[step_x, step_y] : steps) {//éå†å››ä¸ªæ–¹å‘èµ°
        if (within(x + step_x, y + step_y, dim_x, dim_y) &&
            retained[x + step_x][y + step_y]) {//æ£€æŸ¥ç§»åŠ¨åçš„ä½ç½®æ˜¯å¦åœ¨èŒƒå›´å†…å¹¶ä¸”æ˜¯å¯é€šè¡Œçš„
          Cost edge_cost(dim_c, 0);//å®šä¹‰è¾¹çš„æˆæœ¬
          Path edge_pass;//ç»è¿‡çš„è·¯å¾„
          int prev_x = x;//å½“å‰åæ ‡ä¹Ÿæ˜¯å°†è¦æˆä¸ºçš„å‰ç½®åæ ‡
          int prev_y = y;
          int curr_x = x + step_x;//ä¸‹ä¸€ä¸ªåæ ‡ä¹Ÿæ˜¯å°†è¦æˆä¸ºçš„å½“å‰åæ ‡
          int curr_y = y + step_y;
          while (node_matrix[curr_x][curr_y] == -1) {//æ˜¯é™¤äº†èµ·ç»ˆç®¡å²”è·¯ä»¥å¤–çš„æ‰€æœ‰ç‚¹
            for (int c = 0; c < dim_c; c++) {//dim_cæ‹¥å¡ç»´åº¦
              edge_cost[c] += cost_matrix[curr_x][curr_y][c];//ç´¯åŠ å½“å‰ä½ç½®çš„æˆæœ¬åˆ°è¾¹çš„æˆæœ¬ä¸­
            }
            edge_pass.emplace_back(curr_x, curr_y);//å°†å½“å‰ä½ç½®æ·»åŠ åˆ°è¾¹çš„è·¯å¾„ä¸­ï¼Œéç‰¹æ®Šç‚¹

            for (const auto &[next_step_x, next_step_y] : steps) {//å°è¯•åœ¨å½“å‰ä½ç½®çš„å‘¨å›´æ‰¾åˆ°ä¸‹ä¸€ä¸ªå¯é€šè¡Œçš„ä½ç½®ç»§ç»­å‰è¿›
              if (within(curr_x + next_step_x, curr_y + next_step_y, dim_x,
                         dim_y) &&
                  retained[curr_x + next_step_x][curr_y + next_step_y] &&
                  !(curr_x + next_step_x == prev_x &&
                    curr_y + next_step_y == prev_y)) {
                prev_x = curr_x;
                prev_y = curr_y;
                curr_x += next_step_x;//æ›´æ–°currentç‚¹è¿›å…¥å¾ªç¯
                curr_y += next_step_y;
                break;
              }
            }
          }//whileçš„ç»ˆæ­¢æ¡ä»¶æ˜¯æ‰¾åˆ°ä¸‹ä¸€ä¸ªç‰¹æ®Šç‚¹ï¼Œæ‰€ä»¥whileæ˜¯ç”¨æ¥æ‰¾åˆ°ä»å½“å‰ç‰¹æ®Šç‚¹åˆ°ä¸‹ä¸€ä¸ªç‰¹æ®Šç‚¹ï¼Œæ‰€ç»è¿‡çš„è·¯å¾„pathå’Œä¸€è·¯ä¸Šæ¯ä¸ªç»´åº¦æ‰€éœ€ä»£ä»·

          int next_node = node_matrix[curr_x][curr_y];//ç°åœ¨çš„currentæ˜¯ä¹‹å‰ç‰¹æ®ŠèŠ‚ç‚¹å¯åˆ°è¾¾çš„ä¸‹ä¸€ä¸ªç‰¹æ®ŠèŠ‚ç‚¹
          int edge_id = edges.size();
          out_edges[prev_node].push_back(edge_id);//åŸæ¥ç‰¹æ®ŠèŠ‚ç‚¹çš„å‡ºè¾¹
          in_edges[next_node].push_back(edge_id);//ç°åœ¨ç‰¹æ®ŠèŠ‚ç‚¹çš„å…¥è¾¹
          edges.push_back(
              {prev_node, next_node, move(edge_cost), move(edge_pass)});
        }//è®°å½•è¿™ä¸€è·¯ä¸Šçš„ä»£ä»·å’Œæ‰€èµ°è·¯å¾„
      }//å½“å‰ç‰¹æ®ŠèŠ‚ç‚¹å››ä¸ªæ–¹å‘å…¨éƒ¨éå†å®Œ
    }//end for æ‰€æœ‰ç‰¹æ®ŠèŠ‚ç‚¹éå†å®Œï¼Œæ„æˆä¸€ä¸ªåŒ…å«ç‰¹æ®ŠèŠ‚ç‚¹åŠå…¶ä¹‹é—´è¿æ¥å…³ç³»çš„å›¾ï¼Œæœ€ç»ˆçš„å›¾ç»“æ„é€šè¿‡é‚»æ¥è¡¨çš„æ–¹å¼è¡¨ç¤ºï¼Œåˆ†åˆ«è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„å‡ºè¾¹å’Œå…¥è¾¹ï¼Œä¸ä»…åŒ…æ‹¬è¿™äº›èŠ‚ç‚¹ï¼Œè¿˜åæ˜ äº†èŠ‚ç‚¹ä¹‹é—´çš„è·¯å¾„æˆæœ¬ã€‚
```
### 2.2 å¯å‘å¼å‡½æ•°Hå€¼çš„è®¡ç®—
1ã€é¦–å…ˆï¼Œè®¾ç½®ä¸€ä¸ª ideal_to_goal å‡½æ•°ï¼Œè¿”å›çš„æ˜¯æ¯ä¸€ä¸ªç‰¹æ®Šç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„ç›®æ ‡å‘é‡ï¼Œå³ç›®æ ‡ä¸‹ç•Œï¼Œå…¶ä¸­æœ€çŸ­è·¯å¾„æˆæœ¬æ˜¯å¤šç»´åº¦çš„ã€‚
2ã€è¿ç”¨ Dijkstra ç®—æ³•ä»ç»ˆç‚¹å¼€å§‹ï¼Œéå†å…¥è¾¹é‚»æ¥è¡¨æ‰¾åˆ°è¯¥ç‰¹æ®ŠèŠ‚ç‚¹çš„ â€œFatherâ€ å¹¶ç´¯åŠ è·¯å¾„çš„ edge_cost ï¼Œæœ€åæ„å»º ideal_to_goal çŸ©é˜µå­˜å‚¨æ¯ä¸ªç‰¹æ®ŠèŠ‚ç‚¹çš„è¿”å›ç»“æœã€‚
3ã€åœ¨ä¸è€ƒè™‘å¿…ç»ç‚¹çš„æƒ…å†µä¸‹ï¼Œè¯¥ç‚¹åˆ°ç»ˆç‚¹å°†ä»˜å‡ºçš„å„ç›®æ ‡åˆ†é‡ï¼Œå³Hå€¼ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨è¯¥ç‚¹çš„ ideal_to_goal å‡½æ•°å¾—çŸ¥ã€‚
```C++
vector<Cost> ideal_to_goal(dim_n, Cost(dim_c, 1e9));
    for (int c = 0; c < dim_c; c++) {
      ideal_to_goal[goal_node][c] = 0;//è®¾ç½® goal_node åˆ°è‡ªèº«çš„æˆæœ¬ä¸º 0ï¼Œå› ä¸ºç»ˆç‚¹åˆ°ç»ˆç‚¹çš„è·¯å¾„ä»£ä»·ä¸º 0ã€‚
      set<pair<double, int>> pq;
      pq.emplace(0, goal_node);
      while (!pq.empty()) {
        auto [dist, node] = *pq.begin();
        pq.erase(pq.begin());
        for (int edge_id : in_edges[node]) {
          int prev_node = edges[edge_id].prev_node;
          double new_prev_dist = edges[edge_id].edge_cost[c] + dist;
          if (node != goal_node) {
            new_prev_dist += costs[node][c];
          }
          if (ideal_to_goal[prev_node][c] == 1e9) {
            ideal_to_goal[prev_node][c] = new_prev_dist;
            pq.emplace(new_prev_dist, prev_node);
          } else if (new_prev_dist < ideal_to_goal[prev_node][c]) {
            pq.erase({ideal_to_goal[prev_node][c], prev_node});
            ideal_to_goal[prev_node][c] = new_prev_dist;
            pq.emplace(new_prev_dist, prev_node);
          }
        }
      }
    }
```
## 3. å¤šç›®æ ‡A*ç®—æ³•çš„ä¸»è¦å®ç°
### 3.1 æ”¯é…å…³ç³»çš„å®šä¹‰
1ã€ä¸€èˆ¬æ¥è¯´ï¼ŒMOPå¯ä»¥è¡¨ç¤ºä¸ºï¼š${Minimize  F(x) =\lbrace{f_1(x),f_2(x),Â·Â·Â·,f_m(x)\rbrace}}$ ï¼Œ ${x=(x_1,x_2,...,x_n)\in\Omega}$ï¼Œå…¶ä¸­ ${\Omega}$ è¡¨ç¤ºæœç´¢ç©ºé—´ï¼Œm æ˜¯ç›®æ ‡çš„æ•°é‡ï¼Œx æ˜¯ç”± n ä¸ªå†³ç­–å˜é‡ ${x_i}$ ç»„æˆçš„å†³ç­–å‘é‡ã€‚ä¸€ä¸ªè§£ ${x_a}$ è¢«è®¤ä¸º Pareto æ”¯é…å¦ä¸€ä¸ªè§£ ${x_b}$ å½“ä¸”ä»…å½“ ${\forall i =1,2,...,m,f_i(x_a) \leq f_i(x_b)}$ å¹¶ä¸” ${\exists j=1,2,...m,f_j(x_a) \lt f_j(x_b)}$ã€‚
2ã€ åœ¨å¤šç›®æ ‡A\*ç®—æ³•ä¸­ï¼Œæ”¯é…å…³ç³»çš„åˆ¤æ–­æ˜¯ä¸€æ¡è·¯å¾„ A çš„å„ç›®æ ‡åˆ†é‡è¦ä¸å¤§äºå¦ä¸€æ¡è·¯å¾„ B çš„å„ç›®æ ‡åˆ†é‡ï¼Œå¹¶ä¸” A è‡³å°‘è¦æœ‰ä¸€ä¸ªç›®æ ‡åˆ†é‡ä¸¥æ ¼å°äº B å¯¹åº”çš„ç›®æ ‡åˆ†é‡ã€‚
### 3.2 å¤šç›®æ ‡A*ç®—æ³•ä¸­ä¸ªä½“çš„æ›´è¿­
1ã€ é¦–å…ˆï¼Œè®¾ç½®ä¸€ä¸ªèŠ‚ç‚¹-çŠ¶æ€å¯¹ ${(n,s)}$ ï¼Œä¸€ä¸ªèŠ‚ç‚¹-çŠ¶æ€-ä»£ä»·ä¸‰å…ƒç»„ ${(n,s,c)}$ ï¼Œå®šä¹‰ ${T_{n,s}}$ å­˜å‚¨åœ¨æœç´¢æœŸé—´çš„ä»»ä½•æ—¶åˆ»ä»èµ·å§‹èŠ‚ç‚¹-çŠ¶æ€å¯¹ ${(n_{start},s_{start})}$ åˆ°èŠ‚ç‚¹-çŠ¶æ€å¯¹ ${(n,s)}$ çš„æ‰€æœ‰å·²è¯†åˆ«è·¯å¾„çš„éæ”¯é…ç›®æ ‡å‘é‡ã€‚
2ã€éå†èŠ‚ç‚¹ n çš„æ‰€æœ‰å¯åˆ°è¾¾çš„ç›¸é‚»å­èŠ‚ç‚¹ ${n'}$ ï¼Œå¹¶å¾—åˆ°å­èŠ‚ç‚¹çš„èŠ‚ç‚¹-çŠ¶æ€-ä»£ä»·ä¸‰å…ƒç»„ ${(n',s',c')}$ ã€‚
3ã€${c'}$ è¢« ${T_{n',s'}}$ æ”¯é…ï¼Œåˆ™è¯æ˜å½“å‰è·¯å¾„ä¸å¦‚å·²æœ‰è·¯å¾„ï¼Œè·³è¿‡ã€‚
4ã€${c'}$ æ”¯é…äº† ${T_{n',s'}}$ ä¸­çš„æŸäº› ${\bar c}$ ï¼Œåˆ™è¯æ˜æœ‰æ¯” ${\bar c}$ æ›´å¥½çš„è§£ï¼Œå¹¶ä¸”è¿™äº›è¢«æ”¯é…çš„ ${\bar c}$ å°†åœ¨ ${T_{n',s'}}$ ä¸­è¢«åˆ é™¤ã€‚
5ã€å¦‚æœ ${c'}$ æ—¢ä¸è¢« ${T_{n',s'}}$ æ”¯é… ï¼Œä¹Ÿä¸æ”¯é… ${T_{n',s'}}$ ä¸­çš„ä»»ä½•è§£ï¼Œå³ä»¥ä¸Šä¸¤ç§æƒ…å†µéƒ½ä¸ç¬¦åˆï¼Œ ${c'}$ ä¸ ${T_{n',s'}}$ ä¸­çš„æ‰€æœ‰è§£æ˜¯éæ”¯é…å…³ç³»ï¼Œåˆ™è®¡ç®— ${(n',s')}$ çš„ F å€¼ï¼Œå¹¶åŠ å…¥åˆ° ${T_{n',s'}}$ ã€‚
### 3.3 å¤šç›®æ ‡A*ç®—æ³•çš„ä¸»ä½“æµç¨‹
1ã€è®¾ç½®ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ— Open è¡¨ï¼Œæ¯æ¬¡å°†Få€¼æœ€å°çš„ç‚¹æ”¾åœ¨é˜Ÿé¦–ã€‚ï¼ˆä¸å•ç›®æ ‡A\*ç®—æ³•ç›¸åŒï¼‰ã€‚
2ã€å°†èµ·å§‹èŠ‚ç‚¹æ”¾å…¥åˆ° Open è¡¨ä¸­ï¼Œå¼€å§‹éå† Open è¡¨ï¼Œç›´åˆ° Open è¡¨ä¸­æ‰€æœ‰å…ƒç´ éå†å®Œï¼ˆOpen è¡¨ä¸ºç©ºï¼‰åœæ­¢ã€‚è¿™æ ·å¯ä»¥ä¿è¯ç®—æ³•èƒ½å¤Ÿæ‰¾åˆ°æ‰€æœ‰éæ”¯é…è·¯å¾„ã€‚ï¼ˆå•ç›®æ ‡A\*ç®—æ³•ä¸­éå†åˆ°ç»ˆç‚¹å°±åœæ­¢ï¼‰
3ã€åˆ¤æ–­éå†åˆ°çš„èŠ‚ç‚¹æ˜¯å¦ä¸ºç»ˆç‚¹ï¼Œæ˜¯åˆ™å­˜å‚¨å¹¶è·³è¿‡è¿›è¡Œä¸‹ä¸€è½®å¾ªç¯ï¼Œå¦åˆ™ç»§ç»­ã€‚
4ã€å½“å‰ç‚¹çš„ F å€¼æ˜¯å¦è¢«è¢«Paretoå‰æ²¿æ”¯é…ï¼Œæ˜¯åˆ™ä¸è€ƒè™‘è¿™ä¸ªè·¯å¾„å¹¶è·³è¿‡ï¼Œå¦åˆ™ç»§ç»­ã€‚
5ã€å½“å‰ç‚¹æ—¢ä¸ä¸ºé‡ç‚¹ï¼Œåˆä¸è¢«Paretoå‰æ²¿æ”¯é…ï¼Œåˆ™éå†å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å‡ºè¾¹ï¼Œåˆ¤æ–­çˆ¶èŠ‚ç‚¹ä¸å­èŠ‚ç‚¹çš„æ”¯é…å…³ç³»ï¼ˆè¯¦è§3.2ï¼‰ï¼Œè‹¥ä¸¤è€…éæ”¯é…ï¼Œåˆ™è®¡ç®—å­èŠ‚ç‚¹çš„ F å€¼ï¼Œå¹¶åŠ å…¥åˆ°Openä¸­ã€‚
```C++
const Cost &start_cost = costs[start_node];//è·å–èµ·å§‹èŠ‚ç‚¹çš„æˆæœ¬

    Cost start_est = start_cost + heuristic(start_node, 0);//è®¡ç®—èµ·å§‹èŠ‚ç‚¹çš„ä¼°è®¡æ€»æˆæœ¬

    vector<unordered_map<int, Front>> tentative(dim_n);
    tentative[start_node][0][start_cost] = {start_est, {}};//åˆå§‹åŒ–èµ·å§‹èŠ‚ç‚¹çš„ä¸´æ—¶å‰æ²¿

    const Front &pareto_front = tentative[goal_node][(1 << dim_k) - 1];// è·å–ç›®æ ‡èŠ‚ç‚¹çš„Paretoå‰æ²¿

    map<Cost, set<Triplet, TripletComparator>, CostComparator> open;//åˆ›å»ºä¸€ä¸ªå¼€æ”¾åˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨å¾…æ¢ç´¢çš„èŠ‚ç‚¹ã€‚æŒ‰ç…§ä¼°è®¡æ€»æˆæœ¬è¿›è¡Œæ’åº
    open[start_est].insert({start_node, 0, costs[start_node]});//å°†èµ·å§‹èŠ‚ç‚¹æ·»åŠ åˆ°å¼€æ”¾åˆ—è¡¨ä¸­ã€‚

    int iteration = 0;
    while (!open.empty()) {
      iteration++;
      Cost est = open.begin()->first;//ä»èµ·ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„å®é™…ä»£ä»·åŠ ä¸Šä»å½“å‰èŠ‚ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹çš„ä¼°è®¡ä»£ä»·ä¹‹å’Œ
      auto [node, status, cost] = *open.begin()->second.begin();//è·å–å¼€æ”¾åˆ—è¡¨ä¸­ä¼°è®¡æ€»æˆæœ¬æœ€å°çš„èŠ‚ç‚¹ä¿¡æ¯

      if (auto it = open.begin(); it->second.size() == 1) {
        open.erase(open.begin());//å¦‚æœé›†åˆä¸­åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œopen åˆ—è¡¨ä¸­è¿™ä¸ªé”®å€¼å¯¹ï¼ˆèŠ‚ç‚¹å’Œå®ƒçš„ä»£ä»·ï¼‰ä¼šè¢«åˆ é™¤
      } else {//å¦‚æœæœ‰å¤šä¸ªèŠ‚ç‚¹å…·æœ‰ç›¸åŒçš„ä¼°è®¡æˆæœ¬ï¼Œåˆ™åªåˆ é™¤å½“å‰å¤„ç†çš„èŠ‚ç‚¹ï¼Œä¿ç•™å‰©ä¸‹çš„èŠ‚ç‚¹ã€‚
        it->second.erase(it->second.begin());
      }

      if (node == goal_node && status == (1 << dim_k) - 1) {//å¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯ç›®æ ‡èŠ‚ç‚¹ï¼Œå¹¶ä¸”å·²ç»è®¿é—®äº†æ‰€æœ‰å…³é”®ç‚¹ï¼ˆçŠ¶æ€ä¸ºå…¨1ï¼‰ï¼Œåˆ™ç»§ç»­ä¸‹ä¸€è½®å¾ªç¯ï¼Œæ„å‘³ç€æ‰¾åˆ°äº†æœ‰æ•ˆè·¯å¾„ã€‚
        continue;
      }

      if (pareto_front.dominates(est)) {//å¦‚æœå½“å‰èŠ‚ç‚¹çš„ä¼°è®¡æˆæœ¬è¢«Paretoå‰æ²¿æ”¯é…ï¼Œåˆ™ä¸è€ƒè™‘è¿™ä¸ªè·¯å¾„ï¼Œç›´æ¥è·³è¿‡ã€‚
        tentative[node][status].erase(cost);
        continue;
      }

      //é€šè¿‡æ‰©å±•èŠ‚ç‚¹ã€æ›´æ–°çŠ¶æ€ã€è®¡ç®—æˆæœ¬å’Œå¯å‘å¼ä¼°è®¡ï¼ŒåŠ¨æ€å¯»æ‰¾å¤šç›®æ ‡æ¡ä»¶ä¸‹çš„æœ€ä¼˜è·¯å¾„ã€‚åŒæ—¶ï¼Œæ”¯é…ï¼ˆdominatesï¼‰çš„æ¦‚å¿µå¸®åŠ©è¿‡æ»¤æ¬¡ä¼˜è·¯å¾„ï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚
      for (int edge_id : out_edges[node]) {//éå†å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å‡ºè¾¹
        int next_node = edges[edge_id].next_node;

        int next_status = status;
        if (keys[next_node] != -1) {//å¯¹äºæ¯æ¡è¾¹ï¼Œè·å–ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å’Œæ›´æ–°çŠ¶æ€ï¼ˆå¦‚æœè¯¥èŠ‚ç‚¹æ˜¯å…³é”®ç‚¹ï¼Œåˆ™æ›´æ–°çŠ¶æ€ï¼‰ã€‚
          next_status |= (1 << keys[next_node]);
        }

        Cost next_cost = cost;
        next_cost += edges[edge_id].edge_cost;
        next_cost += costs[next_node];//è®¡ç®—åˆ°è¾¾ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æ€»æˆæœ¬ã€‚

        Front &next_tent = tentative[next_node][next_status];

        if (next_tent.dominates(next_cost)) {//æ£€æŸ¥å½“å‰è·¯å¾„æ˜¯å¦å·²ç»æ”¯é…äº†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„è·¯å¾„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è·³è¿‡
          continue;
        }

        if (auto it = next_tent.find(next_cost); it != next_tent.end()) {
          it->second.previous.push_back({node, status, cost, edge_id});
          continue;//å°†å½“å‰è·¯å¾„ä¿¡æ¯åŠ å…¥åˆ°previousä¸­ä»¥å¤‡åç»­è·¯å¾„å›æº¯ä½¿ç”¨
        }

        if (auto it_dom = next_tent.find_dominated(next_cost);//å¯¹äºæ¯ä¸ªè¢«æ”¯é…çš„è·¯å¾„ï¼Œä»ä¸´æ—¶å‰æ²¿ä¸­åˆ é™¤ï¼Œç¡®ä¿åªä¿ç•™æœ€ä¼˜è·¯å¾„
            it_dom != next_tent.end()) {
          vector<Cost> dominated;
          while (it_dom != next_tent.end()) {//æ‰¾åˆ°äº†è¢«æ”¯é…çš„è·¯å¾„
            const Cost &dom_cost = it_dom->first;//è¢«æ”¯é…è·¯å¾„çš„ Cost å€¼
            const Cost &dom_est = it_dom->second.est;//ä¼°è®¡æ€»æˆæœ¬
            if (auto it_open = open.find(dom_est); it_open != open.end()) {//åˆ é™¤åŠ£äºå½“å‰è·¯å¾„çš„å…¶ä»–è·¯å¾„
              if (auto it_set =
                      it_open->second.find({next_node, next_status, dom_cost});
                  it_set != it_open->second.end()) {//ä» open åˆ—è¡¨ä¸­åˆ é™¤è¢«æ”¯é…è·¯å¾„
                if (it_open->second.size() == 1) {
                  open.erase(it_open);//å½“å‰ä¼°è®¡ä»£ä»· dom_est ä¸‹åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ç»„åˆï¼Œåˆ™åˆ é™¤æ•´ä¸ª open é¡¹
                } else {//åªæœ‰åŒnodeï¼ŒåŒstatusä¸‹çš„åŒdom_costæ‰ä¼šè¢«åˆ é™¤ï¼Œå¯èƒ½åŒ…å«æœ‰ç›¸åŒdom_costï¼Œä½†æ˜¯æ˜¯ä¸åŒnodeï¼Œstatusçš„ï¼Œå› ä¸ºseté›†åˆæ˜¯ä»¥dom_costä½œä¸ºæŸ¥æ‰¾æ¡ä»¶çš„
                  it_open->second.erase(it_set);// ä»…åˆ é™¤å½“å‰è¢«æ”¯é…çš„è·¯å¾„ç»„åˆ,è€Œä¸ä¼šå½±å“å…¶ä»–å…·æœ‰ç›¸åŒä¼°è®¡ä»£ä»·çš„èŠ‚ç‚¹ç»„åˆ
                }
              }
            }
            dominated.push_back(dom_cost);
            it_dom++;
          }
          for (const Cost &dom_cost : dominated) {//ä»ä¸´æ—¶å‰æ²¿ä¸­åˆ é™¤è¢«æ”¯é…è·¯å¾„
            next_tent.erase(dom_cost);
          }
        }

        Cost next_est = next_cost + heuristic(next_node, next_status);//è®¡ç®—ä¼°è®¡çš„æˆæœ¬
        if (pareto_front.dominates(next_est)) {//æ˜¯å¦å·²ç»è¢«å¸•ç´¯æ‰˜å‰æ²¿æ”¯é…
          continue;
        }

        open[next_est].insert({next_node, next_status, next_cost});//æ·»åŠ åˆ°å¼€æ”¾åˆ—è¡¨ä¸­

        next_tent[next_cost] = {next_est, {{node, status, cost, edge_id}}};
      }//end for éå†å®Œå½“å‰èŠ‚ç‚¹ä¸‹ä¸€æ­¥å¯è¾¾çš„æ‰€æœ‰ç‚¹
    }//end while æ‰€æœ‰openéå†å®Œ
```

## ğŸ“ Homepages

- Personal Pages: https://JaywayXu.github.io (updated recentlyğŸ”¥)
- ä¸­æ–‡ç«™ç‚¹ï¼šhttps://JaywayXu.github.io/zh-cn/ ï¼ˆ`å¦‚æœä½ æ˜¯å›½å†…çš„å­¦è€…ï¼Œæƒ³è¦æ›´å¤šäº†è§£æˆ‘ä»¬è¯¾é¢˜ç»„çš„åŠ¨æ€`ï¼‰
- Google Scholar: https://scholar.google.com/citations?user=_Lkioz8AAAAJ&hl
- Researchgate: https://www.researchgate.net/profile/Zhiwei-Xu-16
- å¾®ä¿¡å…¬ä¼—å·ï¼š æ¼”åŒ–è®¡ç®—ä¸äººå·¥æ™ºèƒ½
- CSDN: æ­¦ç§‘å¤§è®¸å¿—ä¼Ÿ : https://xuzhiwei.blog.csdn.net/
- Email: xuzhiwei@wust.edu.cn

My full paper list is shown at [my personal homepage](https://JaywayXu.github.io/) or [ä¸­æ–‡ä¸»ç«™](https://JaywayXu.github.io/zh-cn/).